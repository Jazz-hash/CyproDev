{% extends 'base/base.html' %}
{% load static %}
{% block body %}
<section class="site-section  bg-light block__62272" id="next-section">
    <div class="container">
        <div class="row justify-content-center mb-5" data-aos="fade-up">
            <div id="filters" class="filters text-center button-group col-md-7">
                <button class="btn btn-primary active search_query" data-filter="*">All</button>
                <button class="btn btn-primary search_query" data-filter=".web">Web Design and
                    Development</button>
                <button class="btn btn-primary search_query" data-filter=".design">Graphic Design</button>
                <button class="btn btn-primary search_query" data-filter=".brand">Animation</button>
            </div>
        </div>
        <div id="posts" class="row no-gutter" style="position: relative; height: 1495.94px;">

        </div>
    </div>
</section>
{% endblock body %}

{% block scripts %}
<script>
    $(document).ready(function () {
        var search_query = '/api/portfolio/search/?query=';
        var type = '';
        getData(search_query);
        function getData(query) {
            $.ajax({
                url: query,
                method: 'GET',
                success: function (data) {
                    for (var index = 0; index < data.length; index++) {
                        const element = data[index]['category']['head'];
                        if (element == 'Web Designing' || element == 'Web Development') {
                            type = 'web';
                        }
                        if (element == 'Graphic Designing') {
                            type = 'design';
                        }
                        if (element == 'Animations') {
                            type = 'brand';

                        }
                        var porfolio = '<div class="item ' + type + ' col-6 col-sm-6 col-md-6 col-lg-4 col-xl-4 mb-4" style = "position: absolute; left: 0px; top: 0px;" > \
                            <a href="portfolio-single.html" class="item-wrap"> \
                                <span class="icon-add"></span> \
                                <img class="img-fluid" style="height:300px !important" src="'+ data[index]["porfolio_images"][0]["image"] + '"> \
                            </a> \
                        </div>' ;
                        $('#posts').append(porfolio);
                    }
                },
                error: function (data) {
                    console.log('error');
                }
            });
        }
    });

</script>
{% endblock scripts %}